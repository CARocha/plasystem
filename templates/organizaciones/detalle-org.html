{% extends "organizaciones/base-org-dash.html" %}

{% block content %}
<div class="content">

	<div class="page-header-title">

        <div class="row">
            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                {% if not request.session.anio %}

                <ol class="breadcrumb">
                    <li>
                        <a href="/">Inicio</a>
                    </li>
                    <li>
                        <a href="javascript:history.back()">Dashboard organizaciones</a>
                    </li>
                    <li class="active">Detalle Organización</li>
                </ol>
                {% else %}
                <ol class="breadcrumb">
                    <li>
                        <a href="/">Inicio</a>
                    </li>
                    <li>
                        <a href="/organizaciones/">Consulta</a>
                    </li>
                    <li class="active">Organizaciones</li>
                </ol>
                {% endif %}
            </div>
            <!--<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                <ul class=" nav navbar-nav pull-right nav-pais">
                    {% if not request.session.anio %}
                    <li {% if '?pais=1' in request.get_full_path %}class="active"{% endif %}><a href="/organizaciones/dashboard/?pais=1">Nicaragua</a></li>
                    <li {% if '?pais=2' in request.get_full_path  %}class="active"{% endif %}><a href="/organizaciones/dashboard/?pais=2">Honduras</a></li>
                    <li {% if '?pais=3' in request.get_full_path  %}class="active"{% endif %}><a href="/organizaciones/dashboard/?pais=3">Guatemala</a></li>
                    {% else %}
                    <li class="active"><a href="#">{{request.session.pais}}</a></li>
                    {% endif %}
                </ul>
            </div>-->
        </div>
    </div>



	<div class="page-content-wrapper ">
		<div class="container">
            
            <div class="clearfix"></div>
            <div class="row">
                <div class="col-xs-12 col-sm-6">
                    
                    <div class="panel panel-primary">
                        <div class="panel-body">
                            <h4 class="m-t-0">
                                {{org.nombre}}
                            </h4>
                            <p><b>Dirección: </b>{{org.direccion}}</p>
                            <ul class="list-inline span-green">
                                <li>
                                    <i class="fa fa-map-marker"></i> {{org.pais}} </li>
                                <li>
                                    <i class="fa fa-map-marker"></i> {{org.departamento}} </li>
                                <li>
                                    <i class="fa fa-map-marker"></i> {{org.municipio.nombre}} </li>
                                <li>
                                    <i class="fa fa-briefcase"></i> {{org.tipo}} 
                                </li>

                            </ul>
                            <p><b>Cuenta con personería Jurídica: </b>{{org.get_personeria_display}}</p>
                            <ul class="list-inline">
                                <li>
                                    <p><b>En operaciones: </b>{{org.get_en_operaciones_display}}</p>
                                </li>
                                <li>
                                   <p><b>Año de incorporación: </b>{{org.incorporacion}}</p> 
                                </li>
                                <li>
                                    <p><b>No. de licencia empresarial: </b>{{org.licencia}}</p>
                                </li>
                                <li>
                                    <p><b>Apoyo: </b>{{org.get_apoyo_display}}</p>
                                </li>
                                <li>
                                    <p><b>Cooperativas que son miembros: </b>{{cooprativas.0}}</p>
                                </li>
                            </ul>
                            <p><b>Contacto: </b></p>
                            <ul class="list-inline">
                                <li>
                                    <i class="fa fa-phone"></i> {{org.oficina_numero}} </li>
                                <li>
                                    <i class="fa fa-envelope"></i><a href="mailto:{{org.oficina_correo}}"> {{org.oficina_correo}}</a>  </li>
                                <li>
                                    <i class="fa fa-globe"></i> <a href="{{org.sitio_web}} ">{{org.sitio_web}} </a></li>

                            </ul>
                            <br>
                            <p><b>Redes sociales: </b></p>
                            <div class="row">
                                <a href="{{org.red_social1}}" class="col-xs-4 col-sm-4 col-md-4 col-lg-3 social-link" target="_blank">
                                    Red social 1
                                </a>
                                <a href="{{org.red_social2}}" class="col-xs-4 col-sm-4 col-md-4 col-lg-3 social-link" target="_blank">
                                    Red social 2
                                </a>
                                <a href="{{org.red_social3}}" class="col-xs-4 col-sm-4 col-md-4 col-lg-3 social-link" target="_blank">
                                    Red social 3
                                </a>
                                <a href="{{org.red_social4}}" class="col-xs-4 col-sm-4 col-md-4 col-lg-3 social-link" target="_blank">
                                    Red social 4
                                </a>
                            </div>
                            
                        </div>
                    </div>
                </div>
                <div class="col-xs-12 col-sm-6">
                    <div class="panel panel-primary">
                        <div class="panel-body">
                            <h4 class="m-t-0">
                                <i class="fa fa-edit"></i> Personas de contacto 
                            </h4>
                            <div class="row">
                                <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 border-rigth">
                                    <p><b>{{org.persona1_contacto}}</b></p>
                                    <p><b><i class="fa fa-briefcase"></i> Cargo: </b> {{org.persona1_cargo}}</p>
                                    <p><b><i class="fa fa-phone"></i> Teléfono:</b> {{org.persona1_telefono}} </p>
                                    <p><b><i class="fa fa-envelope"></i> Correo: </b> <a href="mailto:{{org.persona1_correo}}">{{org.persona1_correo}}</a></p>
                                </div>
                                <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                                    <p><b>{{org.persona2_contacto}}</b></p>
                                    <p><b><i class="fa fa-briefcase"></i> Cargo: </b> {{org.persona2_cargo}}</p>
                                    <p><b><i class="fa fa-phone"></i> Teléfono:</b> {{org.persona2_telefono}}</p>
                                    <p><b><i class="fa fa-envelope"></i> Correo: </b> <a href="mailto:{{org.persona2_correo}}">{{org.persona2_correo}}</a></p>
                                </div>
                            </div>
                            
                        </div>

                    </div>
                    <div class="panel panel-primary">
                        <div class="panel-heading ph-costum">
                             <ul class="nav nav-tabs tab-costum" role="tablist">
                                <li role="presentation" class="active">
                                    <a href="#home" aria-controls="home" role="tab" data-toggle="tab">Visión</a>
                                </li>
                                <li role="presentation">
                                    <a href="#tab" aria-controls="tab" role="tab" data-toggle="tab">Misión</a>
                                </li>
                            </ul>
                        </div>
                        <div class="panel-body tab-content">
                            
                            <div role="tabpanel" class="tab-pane active" id="home">{{org.vision}}</div>
                            <div role="tabpanel" class="tab-pane" id="tab">{{org.mision}}</div>
                            
                        </div>
                    </div>
                </div>
            </div>
			<div class="row">
                
				<div class="col-xs-12 col-sm-6">
					<div class="panel panel-primary">
						<div class="panel-body">
							<h4 class="m-t-0">Área reciben apoyo <!-- <span class="mdi mdi-help-circle"></span> --></h4>
							<div id="grafico3" width:'100%' style="height: 350px;"></div>
						</div>
					</div>
				</div>
                <div class="col-xs-12 col-sm-6">
                    <div class="panel panel-primary">
                        <div class="panel-body">
                            <h4 class="m-t-0">Miembros (directivos de la OP+ indirectos vías Sucursal) <!-- <span class="mdi mdi-help-circle"></span> --></h4>
                            <div id="grafico4" width:'100%' style="height: 350px;"></div>
                        </div>
                    </div>
                </div>
			</div>

			<div class="row">
				<div class="col-xs-12 col-sm-6">
					<div class="panel panel-primary">
						<div class="panel-body">
							<h4 class="m-t-0">Productores proveedores no socios <!-- <span class="mdi mdi-help-circle"></span> --></h4>
							<div id="grafico5" width:'100%' style="height: 350px;"></div>
						</div>
					</div>
				</div>
                <div class="col-xs-12 col-sm-6">
                    <div class="panel panel-primary">
                        <div class="panel-body">
                            <h4 class="m-t-0">Tipo de organizaciones a las que pertenece <!-- <span class="mdi mdi-help-circle"></span> --></h4>
                            <ul>
                                {% for org in org_pertenece %}
                                    <li>{{org}}</li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
			</div>
			<div class="row">
				<div class="col-sm-12">
					<div class="panel panel-primary">
						<div class="panel-body">
							<h4 class="m-t-0">Empleados de la organización <!-- <span class="mdi mdi-help-circle"></span> --></h4>
							<div id="grafico6" width:'100%' style="height: 350px;"></div>
						</div>
					</div>
				</div>
			</div>

            <div class="row">
                <div class="col-sm-6">
                    <div class="panel panel-primary">
                        <div class="panel-body">
                            <h4 class="m-t-0">Evaluación SCOPE Pro consolidado por bloque <!-- <span class="mdi mdi-help-circle"></span> --></h4>
                            <div id="grafico7" width:'100%' style="height: 350px;"></div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="panel panel-primary">
                        <div class="panel-body">
                            <h4 class="m-t-0">Evaluación SCOPE Pro consolidado por bloque <!-- <span class="mdi mdi-help-circle"></span> --></h4>
                            <style type="text/css">
                                .tabla {
                                  height: 350px;
                                  overflow: auto;  
                                }
                            </style>
                            <div class="tabla">
                                {% include "organizaciones/tabla_scope.html" %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-6">
                    <div class="panel panel-primary">
                        <div class="panel-body">
                            <h4 class="m-t-0">Actividades <!-- <span class="mdi mdi-help-circle"></span> --></h4>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Actividades</th>
                                        <th>Socios</th>
                                        <th>No socios</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for k,v in actividades.items %}
                                    <tr>
                                        <td>{{k}}</td>
                                        <td>{% if v.0.0 == 1 %}Si{% else %}No{% endif %}</td>
                                        <td>{% if v.1.0 == 1 %}Si{% else %}No{% endif %}</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="panel panel-primary">
                        <div class="panel-body">
                            <h4 class="m-t-0">Servicios <!-- <span class="mdi mdi-help-circle"></span> --></h4>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Servicios</th>
                                        <th>Socios</th>
                                        <th>No socios</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for k,v in servicios.items %}
                                    <tr>
                                        <td>{{k}}</td>
                                        <td>{% if v.0.0 == 1 %}Si{% else %}No{% endif %}</td>
                                        <td>{% if v.1.0 == 1 %}Si{% else %}No{% endif %}</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-12">
                    <div class="panel panel-primary">
                        <div class="panel-body">
                            <h4 class="m-t-0">Comparativo por año evaluación SCOPE Pro<!-- <span class="mdi mdi-help-circle"></span> --></h4>
                            <div id="container" width:'100%' style="height: 350px;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-xs-12 col-sm-6">
                    <div class="panel panel-primary">
                        <div class="panel-body">
                            <h4 class="m-t-0">Cantidad de productores que incrementan volumen de abastecimiento de productos sanos<!-- <span class="mdi mdi-help-circle"></span> --></h4>
                            <div id="container1" width:'100%' style="height: 350px;"></div>
                        </div>
                    </div>
                </div>

                <div class="col-xs-12 col-sm-6">
                    <div class="panel panel-primary">
                        <div class="panel-body">
                            <h4 class="m-t-0">Cantidad de productores que han incrementado sus ingresos por cultivos<!-- <span class="mdi mdi-help-circle"></span> --></h4>
                            <div id="container2" width:'100%' style="height: 350px;"></div>
                        </div>
                    </div>
                </div>
            </div>

		</div>
	</div>
</div>
		
{% endblock %}

{% block extra_js %}
<script type="text/javascript">
	Highcharts.chart('grafico3', {
    chart: {
        type: 'bar'
    },
    title: {
        text: ''
    },
    xAxis: {
        categories: [{% for k in areas.keys %}'{{k}}',{% endfor %}]
    },
    yAxis: {
        min: 0,
        title: {
            text: ''
        }
    },
    legend: {
        reversed: true
    },
    plotOptions: {
        series: {
            stacking: 'normal'
        }
    },
    series: [{
        name: 'Áreas',
        data: [{% for v in areas.values %}{{v}},{% endfor %}]
    }]
});

Highcharts.chart('grafico4', {
    chart: {
        type: 'bar'
    },
    title: {
        text: ''
    },
    xAxis: {
        categories: ['Total H', 'Total M','Activos H', 'Activos M', 'Jovenes H', 'Jovenes M']
    },
    yAxis: {
        min: 0,
        title: {
            text: ''
        }
    },
    legend: {
        reversed: true
    },
    
    series: [
    {% for k,v in miembros.items %}
    	{
	        name: '{{k}}',
	        data: [{{v.0|default:"0"}}, {{v.1|default:"0"}}, {{v.2|default:"0"}}, {{v.3|default:"0"}}, {{v.4|default:"0"}},{{v.5|default:"0"}}]
    	},
    {% endfor %}]
});

Highcharts.chart('grafico5', {
    chart: {
        type: 'column'
    },
    title: {
        text: 'Número de miembros registrados oficialmente'
    },
    xAxis: {
        categories: ['Hombres', 'Mujeres']
    },
    credits: {
        enabled: false
    },
    series: [{
        name: 'Total',
        data: [{{productores.0.0|default:"0"}}, {{productores.1|default:"0"}}]
    }, {
        name: 'Activos',
        data: [{{productores.2|default:"0"}}, {{productores.3|default:"0"}}]
    }, {
        name: 'Jovenes',
        data: [{{productores.4|default:"0"}}, {{productores.5|default:"0"}}]
    }]
});

Highcharts.chart('grafico6', {
    chart: {
        type: 'bar'
    },
    title: {
        text: ''
    },
    xAxis: {
        categories: ['Total H', 'Total M','Adultos H', 'Adultos M', 'Jovenes H', 'Jovenes M']
    },
    yAxis: {
        min: 0,
        title: {
            text: ''
        }
    },
    legend: {
        reversed: true
    },
    
    series: [
    {% for k,v in empleados.items %}
    	{
	        name: '{{k}}',
	        data: [{{v.0|default:"0"}}, {{v.1|default:"0"}}, {{v.2|default:"0"}}, {{v.3|default:"0"}}, {{v.4|default:"0"}},{{v.5|default:"0"}}]
    	},
    {% endfor %}]
});

        


Highcharts.chart('grafico7', {

    chart: {
        polar: true,
        type: 'line'
    },

    title: {
        text: '',
        x: -80
    },

    pane: {
        size: '80%'
    },

    xAxis: {
        categories: ['Gestión Interna', 'Operaciones', 'Sostenibilidad', 'Gestión Financiera',
                'Desempeño Financiero', 'Suministros', 'Mercados', 'Riesgos Externos', 'Facilitadores'],
        tickmarkPlacement: 'on',
        lineWidth: 0
    },

    yAxis: {
        gridLineInterpolation: 'polygon',
        lineWidth: 0,
        min: 0
    },

    tooltip: {
        shared: true,
        pointFormat: '<span style="color:{series.color}">{series.name}: <b>{point.y:,.1f}</b><br/>'
    },

    legend: {
        align: 'right',
        verticalAlign: 'top',
        y: 70,
        layout: 'vertical'
    },

    series: [
    {% for k,v in dic_anios.items %}
        {
            name: '{{k}}',
            data: [{% for x in v %}{{x.0|default:"0"}},{% endfor %}],
            pointPlacement: 'on'
        },
    {% endfor %}
    ]

});

//graficos de carlos
Highcharts.chart('container', {
    chart: {
        type: 'areaspline'
    },
    title: {
        text: 'Comparativo por año evaluación SCOPE Pro'
    },
    legend: {
        layout: 'vertical',
        align: 'left',
        verticalAlign: 'top',
        x: 150,
        y: 100,
        floating: true,
        borderWidth: 1,
        backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'
    },
    xAxis: {
        categories: [
            'bloque1',
            'bloque2',
            'bloque3',
            'bloque4',
            'bloque5',
            'bloque6',
            'bloque7',
            'bloque8',
            'bloque9',
        ],
        plotBands: [{ // visualize the weekend
            from: 4.5,
            to: 6.5,
            color: 'rgba(68, 170, 213, .2)'
        }]
    },
    yAxis: {
        title: {
            text: 'valor'
        }
    },
    tooltip: {
        shared: true,
        valueSuffix: ' '
    },
    credits: {
        enabled: false
    },
    plotOptions: {
        areaspline: {
            fillOpacity: 0.5
        }
    },
    series: [
    {% for k,v in comparativa_dict.items %}
        {
            name: '{{k}}',
            data: {{v}}
        },
    {% endfor %}
    ]
});

// grafo volumen
Highcharts.chart('container1', {
    chart: {
        type: 'column'
    },
    title: {
        text: 'Cantidad de productores que incrementan volumen de abastecimiento de productos sanos'
    },
    subtitle: {
        text: ''
    },
    xAxis: {
        type: 'category'
    },
    yAxis: {
        title: {
            text: 'conteo'
        }

    },
    legend: {
        enabled: false
    },
    plotOptions: {
        series: {
            borderWidth: 0,
            dataLabels: {
                enabled: true,
                format: '{point.y:.1f}'
            }
        }
    },

    tooltip: {
        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
        pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.2f}</b> of total<br/>'
    },

    series: [{
        name: 'Brands',
        colorByPoint: true,
        data: [
        {% for k,v in grafo_volumen.items %}
            {
                name: '{{k}}',
                y: {{v}},

            },
        {% endfor %}
          ]
    }]

});
//prodctores incrementan ingresos
Highcharts.chart('container2', {

    title: {
        text: 'Cantidad de productores que han incrementado sus ingresos por cultivos'
    },

    subtitle: {
        text: ''
    },

    yAxis: {
        title: {
            text: 'Cantidad de productores'
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'middle'
    },

    plotOptions: {
        series: {
            pointStart: {{inicio_incremento}}
        }
    },

    series: [
    {% for k,v in grafo_incremento.items %}
        {
            name: '{{k}}',
            data: [{{v}},]
        },
    {% endfor %}
    ]

});
</script>
{% endblock %}